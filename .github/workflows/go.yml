name: Go

on:
  push:
  schedule: [cron: '10 * * * *']

jobs:

  build:
    runs-on: ubuntu-latest
    steps:
     - uses: actions/checkout@v2

     - name: Set up Go
       uses: actions/setup-go@v2
       with:
         go-version: 1.17
         
     - name: Checkout
       uses: actions/checkout@v2
     - name: env
       run:
          echo -e "J_USERNAME=${{ secrets.J_USERNAME }}\nJ_PASSWORD=${{ secrets.J_PASSWORD }}\nBOT_TOKEN=${{ secrets.BOT_TOKEN }}\nBOT_CHANNEL=${{ secrets.BOT_CHANNEL }}" > ./.env
        
     - name: download
       uses: actions/download-artifact@v2
       with:
        name: seiseki.json
       
     - name: Run main.go
       run: 
        go run main.go
        
     - name: ls
       run: ls -R
     
     - name: upload
       uses: actions/upload-artifact@v2
       with:
        name: seiseki.json
        path: seiseki.json
